# Changelog

## v0.0.1 (2020-05-10)

- Add HWADDR+UUID network configuration cleanup script for CentOS [`#1`](https://github.com/ruzickap/packer-virt-sysprep/pull/1)
- Add .release-it.yml to .gitignore [`654f716`](https://github.com/ruzickap/packer-virt-sysprep/commit/654f7164e6ef68ee940a9fa015e336dab0aaa8ef)
- Update ubuntu from ubuntu-18.04 -&gt; ubuntu-latest [`69cb4ab`](https://github.com/ruzickap/packer-virt-sysprep/commit/69cb4ab31df607be107f8ee3c2e078258df5b45f)
- Add description when removing 01-netcfg.yaml in sysprep-op-network.sh [`189d361`](https://github.com/ruzickap/packer-virt-sysprep/commit/189d361f1c8b97fbd9e94711b0a5290379c13d8f)
- Remove 01-netcfg.yaml in sysprep-op-network.sh [`e23fe57`](https://github.com/ruzickap/packer-virt-sysprep/commit/e23fe5778ac9fe678df1852c4893c8a7681a30a1)
- Fix ssh access for Ubuntu/Debian after removing ssh host keys [`276520c`](https://github.com/ruzickap/packer-virt-sysprep/commit/276520c52bf713d0ea350325304647ba39149d9a)
- Fix globbing and allow SC2068 [`8daffec`](https://github.com/ruzickap/packer-virt-sysprep/commit/8daffecbfdadecb56e9ce94fee4afd0070343996)
- Add netplan cleanup [`95d88cf`](https://github.com/ruzickap/packer-virt-sysprep/commit/95d88cfbedbd702391d95d6daeb2d83a37be77b5)
- Fork + refactor some parts [`4e5fcd0`](https://github.com/ruzickap/packer-virt-sysprep/commit/4e5fcd00ce25c196a8b8128bc20f41614516ffa4)
- Add HWADDR+UUID network configuration cleanup script for CentOS [`562063b`](https://github.com/ruzickap/packer-virt-sysprep/commit/562063b3174627e75317a5e18db0eb2fc37b0d31)
- Refactor to allow rm of lease file when it does not contain lease info [`afb4e92`](https://github.com/ruzickap/packer-virt-sysprep/commit/afb4e929f338e06e1909dc7612b8b7a4b952250b)
- Ensure the DHCP leases file is removed [`79f144c`](https://github.com/ruzickap/packer-virt-sysprep/commit/79f144c23810f85f9f11196d5af5435f6620c2e8)
- Regenerate SSH keys: Replace rc.local script with systemd unit and script [`055c069`](https://github.com/ruzickap/packer-virt-sysprep/commit/055c069a416cb8a78538551c48314f6212d1a392)
- Fix trigger of 'errexit' due to grep failing to find match [`6abd647`](https://github.com/ruzickap/packer-virt-sysprep/commit/6abd647d4b6b96c895d616cc4a0915059d6db810)
- Clean up and improve conditionals [`814a28e`](https://github.com/ruzickap/packer-virt-sysprep/commit/814a28e253edbf0fc20060b008e58ceda322b9f3)
- Use shorthand '&&gt;/dev/null' in preference to '&gt;/dev/null 2&gt;&1' [`817a6bd`](https://github.com/ruzickap/packer-virt-sysprep/commit/817a6bdb50475fd7d3b7f4edc6fa9d4ea79785a7)
- Consistently follow bash best practice guidelines [`169b11f`](https://github.com/ruzickap/packer-virt-sysprep/commit/169b11f27a55ee428fbbab15b7fe1372098f447e)
- Always exit on error [`8f86d58`](https://github.com/ruzickap/packer-virt-sysprep/commit/8f86d5887df53da7f0294ed8f70c35cc247f9406)
- Add script to remove all cloud-init run-time data and reinitialise [`5a22a21`](https://github.com/ruzickap/packer-virt-sysprep/commit/5a22a218f7bbf9eef49a3d666cc7711be367a55d)
- Fix errors caused by removal of /var/log/lastlog [`18f315e`](https://github.com/ruzickap/packer-virt-sysprep/commit/18f315e9a3865b6f90a5b47e670c5596db08f4d0)
- Update for Debian 9 which does not create the /etc/rc.local file by default [`9e847fa`](https://github.com/ruzickap/packer-virt-sysprep/commit/9e847fa7528997db1997aa89de60be9456185790)
- Fix removal of CentOS installer log due to name change [`fe3be26`](https://github.com/ruzickap/packer-virt-sysprep/commit/fe3be267eaa06d88668ae82eae75eb0d2ac48656)
- Update with reference to example build repository [`d89dc3f`](https://github.com/ruzickap/packer-virt-sysprep/commit/d89dc3fabf866f6505d78cc620018e6c01ced74d)
- Create License.md [`906c239`](https://github.com/ruzickap/packer-virt-sysprep/commit/906c23940c13c04ecdc339d44cfd51e1a5a2f81f)
- Rework script to remove logs using tmpfs technique over stopping of services [`4082972`](https://github.com/ruzickap/packer-virt-sysprep/commit/4082972c7e1272c74a88e98fa45aec6af7d09a4d)
- Fix comment [`171b0a4`](https://github.com/ruzickap/packer-virt-sysprep/commit/171b0a405c869561816d0f19fddae1bd099eabaa)
- Fix flag for mount command Fix error calculating space if dir does not exist [`1f34374`](https://github.com/ruzickap/packer-virt-sysprep/commit/1f343741599c305f05abebbb1b81304dd98d9726)
- Again... better way to enumerate mounted tmpfs file systems [`6cbaa0d`](https://github.com/ruzickap/packer-virt-sysprep/commit/6cbaa0dd161dba10b6204801837498cb64368954)
- Better way to enumerate mounted tmpfs file systems [`b6832b3`](https://github.com/ruzickap/packer-virt-sysprep/commit/b6832b3d50848d7f3f07ffcd5ba4913b17efd0c8)
- Correct test to see if temp dir is already on tmpfs to include parent dirs [`40d4e1a`](https://github.com/ruzickap/packer-virt-sysprep/commit/40d4e1a3f7252262c1be4fc8f5165b9f88562509)
- Fix interpretation of commands within inline script [`acd17cd`](https://github.com/ruzickap/packer-virt-sysprep/commit/acd17cd364c1e46feaa47312b048174da55abbb3)
- Fix issue with Debian hosts not creating new ssh host keys after removal [`3442c80`](https://github.com/ruzickap/packer-virt-sysprep/commit/3442c80d831d900a48cfe2015b36d11ecafd5a61)
- Fix error in loop to stop services [`52d6b96`](https://github.com/ruzickap/packer-virt-sysprep/commit/52d6b9672aa9e496c288ec744b97fdc9920644b0)
- Flush cached writes to disk to prevent writing to logs post delete [`09136a4`](https://github.com/ruzickap/packer-virt-sysprep/commit/09136a423dde4e42f747d1f9629a92df055e93a1)
- Stop systemd sockets as well as services as sockets can restart services [`4d4282f`](https://github.com/ruzickap/packer-virt-sysprep/commit/4d4282f6b91d94e70f0ea8aba7a65f4e336bf69f)
- Fix to include systemd.journald in the list of services we wish to stop [`d387d87`](https://github.com/ruzickap/packer-virt-sysprep/commit/d387d87fe0fc390eb1dca3ba1712f4bf8e8536c6)
- Add script to remove guest log files [`08fe530`](https://github.com/ruzickap/packer-virt-sysprep/commit/08fe530a09e364133a200a40f95cb2525a036d73)
- Add script to safely (we hope!!) clear tmp files from the running guest [`848009f`](https://github.com/ruzickap/packer-virt-sysprep/commit/848009f9ff77683744c2867da09bb35fee0301ca)
- Add script to delete host specific RPM database files [`abccf73`](https://github.com/ruzickap/packer-virt-sysprep/commit/abccf73e25be6bc4c2627619d607aa93866064f0)
- Add script to clear files associated with the guests package manager [`0285b30`](https://github.com/ruzickap/packer-virt-sysprep/commit/0285b309a74b4fb5340fc5f2a697f0c98c78c887)
- Add script to remove the yum UUID associated with the guest [`3e34426`](https://github.com/ruzickap/packer-virt-sysprep/commit/3e34426c4a2ba10415c4a247c4fbefc601512fe3)
- Add script to remove the guests ssh host keys [`998ea2e`](https://github.com/ruzickap/packer-virt-sysprep/commit/998ea2e31f198d62eba1e49ff95c15552fcaa5d2)
- Add script to trigger generation of new machine-id when first booted [`23ec10e`](https://github.com/ruzickap/packer-virt-sysprep/commit/23ec10e70236c8bade2a2b87ea70a359de7b4d09)
- Add script to remove mail from the local mail spool first stopping any MTA [`2d395d6`](https://github.com/ruzickap/packer-virt-sysprep/commit/2d395d646355d3c8fa489071b2f75c2769b55472)
- Add script to remove custom firewall rules. Ensure scripts have exit status [`689213a`](https://github.com/ruzickap/packer-virt-sysprep/commit/689213ac69fa8665f5de87b4a6b91541bba0d2bb)
- Add script to delete dhcp client lease data [`bb34132`](https://github.com/ruzickap/packer-virt-sysprep/commit/bb341325768522abb097be07662194c13d5f3e17)
- Add script to delete crash data created by kexec-tools [`031dd14`](https://github.com/ruzickap/packer-virt-sysprep/commit/031dd14a4702b2eeab3556698c55785985792037)
- Add script to delete root and all system users bash history [`4d1f85d`](https://github.com/ruzickap/packer-virt-sysprep/commit/4d1f85d7364bb741136fc2f60e7e3fd19e3b0caa)
- Initial commit. Create basic README [`9ac65a4`](https://github.com/ruzickap/packer-virt-sysprep/commit/9ac65a4d606dc5fe820cd8f9c2708f0e168e1c2d)
